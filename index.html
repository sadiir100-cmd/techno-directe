<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Techno Directe – Catalogue + Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root{--accent:#ff6b00;--dark:#222;--light:#f7f7f7;--font:'Cairo',sans-serif;}
    *{box-sizing:border-box;margin:0;padding:0;font-family:var(--font);}
    body{background:var(--light);color:var(--dark);line-height:1.6;}
    header{background:var(--dark);color:#fff;padding:1.2rem 1rem;text-align:center;position:relative;}
    header h1{font-size:2rem;font-weight:700;}
    #zoneDblClick{position:absolute;top:0;left:0;width:80px;height:80px;cursor:pointer;}
    .lang-switch{position:absolute;right:1rem;top:1.2rem;background:var(--accent);color:#fff;border:none;padding:.4rem .8rem;border-radius:4px;cursor:pointer;}
    body[dir="rtl"] .lang-switch{left:1rem;right:auto;}
    .container{max-width:1000px;margin:auto;padding:1rem;}
    h2.cartable{color:var(--accent);text-align:center;margin:1rem 0;}
    .card{display:flex;flex-direction:column;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 6px rgba(0,0,0,.1);margin:1rem 0;}
    .card img{width:100%;height:200px;object-fit:cover;cursor:pointer;}
    .info{padding:1rem;}
    .price{font-size:1.5rem;font-weight:700;color:var(--accent);}
    .btn{background:var(--accent);color:#fff;padding:.75rem 1.2rem;border:none;border-radius:4px;cursor:pointer;font-size:1rem;margin:.3rem .3rem 0 0;display:inline-block;text-decoration:none;}
    .btn:hover{background:#e55a00;}
    select{margin:.5rem 0;padding:.5rem;width:100%;max-width:300px;}
    @media(min-width:600px){.card{flex-direction:row;}.card img{width:260px;height:auto;}}
    .modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;z-index:999;}
    .modal{background:#fff;border-radius:8px;width:90%;max-width:500px;padding:1.5rem;position:relative;}
    .modal .close{position:absolute;top:.7rem;right:.7rem;background:none;border:none;font-size:1.4rem;cursor:pointer;}
    body[dir="rtl"] .modal .close{left:.7rem;right:auto;}
    .admin-panel{background:#ffeaa7;padding:1rem;border-radius:6px;margin:2rem 0;display:none;}
    .admin-item{border:1px solid var(--accent);padding:.7rem;margin:.5rem 0;border-radius:4px;background:#fff;}
    .admin-item input[type=text],.admin-item input[type=number],.admin-item input[type=file]{width:100%;margin:.3rem 0;}
    .admin-item img{max-width:120px;display:block;margin:.3rem 0;}
    #addAffiches{margin-bottom:1rem;}
    #commandesList{max-height:300px;overflow:auto;background:#fff;padding:.5rem;border:1px solid #ccc;border-radius:4px;margin-top:.7rem;}
    .cmd-line{display:flex;justify-content:space-between;align-items:center;padding:.2rem 0;}
    .cmd-line button{background:none;border:none;color:var(--accent);font-size:1.2rem;cursor:pointer;}
  </style>
</head>
<body>
  <header>
    <div id="zoneDblClick" title="Double-cliquez pour admin"></div>
    <h1 id="h1-title">Techno Directe</h1>
    <button class="lang-switch" id="langBtn">العربية</button>
  </header>

  <div class="container">
    <h2 class="cartable">Cartable gratuit plus garantie</h2>
    <div id="catalogue"></div>

    <!-- Partie Admin conservée exactement comme ton code original -->
    <div class="admin-panel" id="adminPanel">
      <h2>Zone Admin</h2>
      <button class="btn" id="addAffiches">+ Ajouter une affiche (max 20)</button>
      <div id="adminList"></div>
      <button class="btn" onclick="saveCatalog()">Sauvegarder les changements</button>

      <h3 style="margin-top:1.2rem">Commandes reçues (formulaire)
        <label style="margin-left:1rem;font-size:.9rem;font-weight:normal;">
          <input type="checkbox" id="selectAll"> Tout sélectionner
        </label>
        <button class="btn" onclick="deleteSelected()" style="margin-left:.5rem;">Tout supprimer</button>
      </h3>
      <div id="commandesList"></div>
    </div>
  </div>

  <div class="modal-overlay" id="passModal">
    <div class="modal">
      <button class="close" onclick="closePassModal()">&times;</button>
      <h3>Entrez le mot de passe</h3>
      <input type="password" id="passInput" placeholder="Mot de passe" style="width:100%;padding:.5rem;margin:.7rem 0;">
      <button class="btn" onclick="checkPass()">Valider</button>
    </div>
  </div>

  <footer style="text-align:center;padding:1.5rem;font-size:.85rem;color:#777;">
    Contact : 0699039372 (WhatsApp / appel) | 0560072059 (WhatsApp / appel)<br>
    Facebook : TECHNO DIRECT | Instagram : TECHNO _DIRECT
  </footer>

  <script>
    // ===== Constantes =====
    const PASSWORD = 'technoid';
    const MAX_AFFICHES = 20;
    const PHONE1 = '213699039372';
    const PHONE2 = '213560072059';
    const DEFAULT_CATALOG = [
      {id:1, name:'HP EliteBook 840 G5', desc:'Intel Core i5-8250U • 8 Go DDR4 • SSD 256 Go • 14″ Full HD', price:50000, img:'https://images.unsplash.com/photo-1593640408182-31c70c8268f5?auto=format&fit=crop&w=800&q=60'},
      {id:2, name:'Lenovo ThinkPad T480', desc:'Intel Core i7-8650U • 16 Go DDR4 • SSD 512 Go • 14″ Full HD', price:72000, img:'https://images.unsplash.com/photo-1541807084-5c52b6b3adef?auto=format&fit=crop&w=800&q=60'},
      {id:3, name:'MacBook Air 2018', desc:'Intel Core i5 • 8 Go • SSD 256 Go • 13,3″ Retina', price:94000, img:'https://images.unsplash.com/photo/1629131726692-1accd0c53ce0?auto=format&fit=crop&w=800&q=60'}
    ];
    let catalogue = [];
    
    // ===== Initialisation =====
    if(localStorage.getItem('technoCatalog')) catalogue=JSON.parse(localStorage.getItem('technoCatalog'));
    else { catalogue = JSON.parse(JSON.stringify(DEFAULT_CATALOG)); saveCatalog(); }

    function saveCatalog(){localStorage.setItem('technoCatalog', JSON.stringify(catalogue));}

    // ===== Rendu catalogue avec clic sur photo =====
    function renderCatalog(){
      const cont = document.getElementById('catalogue');
      cont.innerHTML = '';
      catalogue.forEach(prod=>{
        const card = document.createElement('div');
        card.className='card';
        card.innerHTML=`
          <img src="${prod.img}" alt="${prod.name}">
          <div class="info">
            <h2>${prod.name}</h2>
            <p>${prod.desc}</p>
            <p class="price">${prod.price.toLocaleString('fr-DZ')} DA</p>
            <a class="btn whatsapp" href="https://wa.me/${PHONE1}?text=${encodeURIComponent('Bonjour Techno Directe, je veux commander : '+prod.name+' (Total : '+prod.price+' DA)')}">Commander WhatsApp</a>
          </div>`;
        cont.appendChild(card);
      });
      attachPhotoClick();
    }

    function attachPhotoClick(){
      document.querySelectorAll('.card img').forEach(img=>{
        img.onclick=()=>{
          const prod=catalogue.find(p=>p.img===img.src);
          if(!prod) return;
          openPhotoModal(prod);
        }
      });
    }

    function openPhotoModal(prod){
      const overlay=document.createElement('div');
      overlay.className='modal-overlay';
      overlay.style.display='flex';
      overlay.innerHTML=`
        <div class="modal">
          <button class="close" onclick="this.closest('.modal-overlay').remove()">&times;</button>
          <h2>${prod.name}</h2>
          <p>${prod.desc}</p>
          <p class="price">${prod.price.toLocaleString('fr-DZ')} DA</p>
          <a class="btn whatsapp" href="https://wa.me/${PHONE1}?text=${encodeURIComponent('Bonjour Techno Directe, je veux commander : '+prod.name+' (Total : '+prod.price+' DA)')}">WhatsApp</a>
        </div>`;
      document.body.appendChild(overlay);
    }

    // ===== Admin double click =====
    document.getElementById('zoneDblClick').ondblclick=()=>{
      const pass = prompt('Mot de passe admin');
      if(pass===PASSWORD) document.getElementById('adminPanel').style.display='block';
    };

    renderCatalog();
  </script>
</body>
</html>
